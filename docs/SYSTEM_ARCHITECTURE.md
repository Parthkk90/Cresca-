# ğŸ—ï¸ AptPays - Complete System Architecture

## ğŸ“± **Product Overview**

AptPays is a **unified DeFi super app** that brings institutional-grade trading and payments to mobile users on Aptos blockchain.

---

## ğŸ¯ **Core Features**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         APTPAYS ECOSYSTEM                          â”‚
â”‚                  "Your Complete DeFi Wallet"                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ’° WALLET     â”‚  â”‚   ğŸ”„ SWAP       â”‚  â”‚   ğŸ“± TAP-TO-PAY â”‚
â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚
â”‚ â€¢ View Balance  â”‚  â”‚ â€¢ BTC â†” ETH    â”‚  â”‚ â€¢ Instant Send  â”‚
â”‚ â€¢ Send/Receive  â”‚  â”‚ â€¢ Real-time    â”‚  â”‚ â€¢ QR Scanner    â”‚
â”‚ â€¢ QR Code       â”‚  â”‚   Pricing      â”‚  â”‚ â€¢ P2P Transfer  â”‚
â”‚ â€¢ 5.99928 APT   â”‚  â”‚ â€¢ AMM DEX      â”‚  â”‚ â€¢ Address Book  â”‚
â”‚ â€¢ Multi-asset   â”‚  â”‚ â€¢ 0.3% Fee     â”‚  â”‚ â€¢ Quick Pay     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š BUCKET      â”‚  â”‚  ğŸ“… CALENDEFI   â”‚
â”‚   PROTOCOL      â”‚  â”‚                 â”‚
â”‚                 â”‚  â”‚ â€¢ Scheduled Pay â”‚
â”‚ â€¢ Leveraged     â”‚  â”‚ â€¢ Recurring     â”‚
â”‚   Trading       â”‚  â”‚ â€¢ One-time      â”‚
â”‚ â€¢ 1-20x Margin  â”‚  â”‚ â€¢ Auto-execute  â”‚
â”‚ â€¢ Diversified   â”‚  â”‚ â€¢ Escrow Safety â”‚
â”‚   (BTC/ETH/SOL) â”‚  â”‚ â€¢ Cancelable    â”‚
â”‚ â€¢ 0.05 APT Min  â”‚  â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›ï¸ **End-to-End System Architecture**

### **Complete Stack Overview**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          USER LAYER                              â”‚
â”‚                    (Mobile App Interface)                        â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Android App (Kotlin + Compose)              â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚
â”‚  â”‚  â”‚ Dashboard  â”‚  â”‚    Swap    â”‚  â”‚  Tap-Pay   â”‚        â”‚  â”‚
â”‚  â”‚  â”‚  Screen    â”‚  â”‚   Screen   â”‚  â”‚   Screen   â”‚        â”‚  â”‚
â”‚  â”‚  â”‚            â”‚  â”‚            â”‚  â”‚            â”‚        â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Balance  â”‚  â”‚ â€¢ BTCâ†’ETH  â”‚  â”‚ â€¢ Send APT â”‚        â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Assets   â”‚  â”‚ â€¢ Rate     â”‚  â”‚ â€¢ QR Code  â”‚        â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Activity â”‚  â”‚ â€¢ Quote    â”‚  â”‚ â€¢ Contacts â”‚        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚  â”‚
â”‚  â”‚  â”‚  Trading   â”‚  â”‚  Calendar  â”‚                        â”‚  â”‚
â”‚  â”‚  â”‚  Screen    â”‚  â”‚   Screen   â”‚                        â”‚  â”‚
â”‚  â”‚  â”‚            â”‚  â”‚            â”‚                        â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Buckets  â”‚  â”‚ â€¢ Schedulesâ”‚                        â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Positionsâ”‚  â”‚ â€¢ Create   â”‚                        â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ P&L      â”‚  â”‚ â€¢ Execute  â”‚                        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
                    Event-Driven State
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      VIEWMODEL LAYER                             â”‚
â”‚                    (Business Logic - MVVM)                       â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    ViewModel Classes                     â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚  â”‚  â”‚ WalletViewModel â”‚  â”‚  SwapViewModel  â”‚              â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ getBalance()  â”‚  â”‚ â€¢ getQuote()    â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ sendCoins()   â”‚  â”‚ â€¢ executeSwap() â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ receiveCoins()â”‚  â”‚ â€¢ getPoolInfo() â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ scanQR()      â”‚  â”‚ â€¢ trackPrice()  â”‚              â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚  â”‚  â”‚ BucketViewModel â”‚  â”‚CalendarViewModelâ”‚              â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ init()        â”‚  â”‚ â€¢ createPay()   â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ openLong()    â”‚  â”‚ â€¢ execute()     â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ closePos()    â”‚  â”‚ â€¢ cancel()      â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ updatePNL()   â”‚  â”‚ â€¢ getSchedules()â”‚              â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚           StateFlow â† UiState â†’ Coroutines              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
                      Repository Pattern
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REPOSITORY LAYER                              â”‚
â”‚                   (Data Abstraction)                            â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Repository Implementations                  â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚
â”‚  â”‚  â”‚ WalletRepository â”‚  â”‚  SwapRepository  â”‚            â”‚  â”‚
â”‚  â”‚  â”‚                  â”‚  â”‚                  â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ fetchBalance() â”‚  â”‚ â€¢ getQuote()     â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ transfer()     â”‚  â”‚ â€¢ swapTokens()   â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ getHistory()   â”‚  â”‚ â€¢ addLiquidity() â”‚            â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚
â”‚  â”‚  â”‚ BucketRepository â”‚  â”‚CalendarRepositoryâ”‚            â”‚  â”‚
â”‚  â”‚  â”‚                  â”‚  â”‚                  â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ createBucket() â”‚  â”‚ â€¢ schedule()     â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ openPosition() â”‚  â”‚ â€¢ executePaymentâ”‚â”‚            â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ closePosition()â”‚  â”‚ â€¢ cancelPayment()â”‚            â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
                        Kaptos SDK
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SDK/API LAYER                               â”‚
â”‚                 (Aptos Integration)                             â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            xyz.mcxross.kaptos (Kotlin SDK)               â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ Transaction Builder                                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ buildTransaction()                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ signTransaction() (Ed25519)                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ submitTransaction()                              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ waitForTransaction()                             â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ Account Management                                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ createAccount()                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ importAccount(privateKey)                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ getAccountResources()                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ getBalance()                                     â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ View Functions (Read-only)                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ view() - Query without gas                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ simulate() - Test transaction                    â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ BCS Serialization                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ encodeVector()                                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ encodeU64()                                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ encodeAddress()                                  â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
                    HTTPS/JSON-RPC
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BLOCKCHAIN LAYER                               â”‚
â”‚                  (Aptos Network)                                â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          Aptos Fullnode (Testnet/Mainnet)                â”‚  â”‚
â”‚  â”‚  https://fullnode.testnet.aptoslabs.com                  â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â€¢ Transaction Validation                               â”‚  â”‚
â”‚  â”‚  â€¢ Consensus (AptosBFT)                                 â”‚  â”‚
â”‚  â”‚  â€¢ State Storage                                        â”‚  â”‚
â”‚  â”‚  â€¢ Event Emission                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â†•                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              SMART CONTRACTS (Move)                      â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  â”‚
â”‚  â”‚  â”‚ Wallet         â”‚  â”‚  Swap DEX      â”‚                â”‚  â”‚
â”‚  â”‚  â”‚ 0x2bc654...    â”‚  â”‚  TBD           â”‚                â”‚  â”‚
â”‚  â”‚  â”‚                â”‚  â”‚                â”‚                â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ transfer()   â”‚  â”‚ â€¢ swap()       â”‚                â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ balance()    â”‚  â”‚ â€¢ getQuote()   â”‚                â”‚  â”‚
â”‚  â”‚  â”‚                â”‚  â”‚ â€¢ addLiquidity()â”‚               â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  â”‚
â”‚  â”‚  â”‚ Bucket Proto   â”‚  â”‚ Calendar Pay   â”‚                â”‚  â”‚
â”‚  â”‚  â”‚ 0x33ec41...    â”‚  â”‚ 0x0f9713...    â”‚                â”‚  â”‚
â”‚  â”‚  â”‚                â”‚  â”‚                â”‚                â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ init()       â”‚  â”‚ â€¢ create()     â”‚                â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ openLong()   â”‚  â”‚ â€¢ execute()    â”‚                â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ closePos()   â”‚  â”‚ â€¢ cancel()     â”‚                â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â†•                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                 BLOCKCHAIN STATE                         â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚ Account Resources                                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ 0x1::coin::CoinStore<APT>                      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ cresca::bucket_protocol::Protocol              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ aptpays::calendar_payments::Schedules          â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ swap_dex::LiquidityPool<BTC, ETH>             â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚ Events Emitted                                   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ TransferEvent                                  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ SwapExecutedEvent                              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ PositionOpenedEvent                            â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ PaymentExecutedEvent                           â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ **Feature-by-Feature Architecture**

### **1. Wallet Feature (Dashboard)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WALLET FEATURE                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER ACTIONS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ View Balance   â”‚ â”€â”€â†’ WalletViewModel.getBalance()
â”‚ â€¢ Send APT       â”‚ â”€â”€â†’ WalletViewModel.sendCoins()
â”‚ â€¢ Receive APT    â”‚ â”€â”€â†’ WalletViewModel.receiveCoins()
â”‚ â€¢ Scan QR        â”‚ â”€â”€â†’ WalletViewModel.scanQRCode()
â”‚ â€¢ View History   â”‚ â”€â”€â†’ WalletViewModel.getTransactions()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            WalletViewModel (State Management)        â”‚
â”‚                                                      â”‚
â”‚  data class WalletUiState(                          â”‚
â”‚      val balance: String = "0.00 APT",              â”‚
â”‚      val address: String = "0x9d9f4...",            â”‚
â”‚      val isLoading: Boolean = false,                â”‚
â”‚      val transactions: List<Transaction> = emptyListâ”‚
â”‚  )                                                   â”‚
â”‚                                                      â”‚
â”‚  â€¢ MutableStateFlow<WalletUiState>                  â”‚
â”‚  â€¢ Coroutine-based async operations                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              WalletRepository                        â”‚
â”‚                                                      â”‚
â”‚  suspend fun getBalance(): Result<u64>               â”‚
â”‚  suspend fun transfer(to, amount): Result<TxHash>    â”‚
â”‚  suspend fun getHistory(): Result<List<Tx>>          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Aptos SDK + Blockchain                 â”‚
â”‚                                                      â”‚
â”‚  â€¢ 0x1::coin::balance<APT>(address)                  â”‚
â”‚  â€¢ 0x1::coin::transfer<APT>(to, amount)              â”‚
â”‚  â€¢ Query transaction events                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

UI COMPONENTS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard Screen (Compose)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  [Profile Picture]            â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚      5.99928 APT              â”‚  â”‚
â”‚  â”‚    Wallet Balance             â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  ğŸ“‹ 0x9d9f4...928a58 [Copy]   â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Send âœˆ  â”‚  â”‚ Receive ğŸ“²â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚Tap-Pay ğŸ“±â”‚  â”‚  Swap ğŸ”„ â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  Assets:                      â”‚  â”‚
â”‚  â”‚  ğŸª™ Bitcoin   $110018.0       â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  Navigation Bar:              â”‚  â”‚
â”‚  â”‚  [Wallet] [Trade] [Pay] [...] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **2. Swap Feature (DEX)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SWAP FEATURE                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER ACTIONS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Select Tokens  â”‚ â”€â”€â†’ SwapViewModel.selectPair()
â”‚ â€¢ Enter Amount   â”‚ â”€â”€â†’ SwapViewModel.getQuote()
â”‚ â€¢ Review Swap    â”‚ â”€â”€â†’ SwapViewModel.reviewSwap()
â”‚ â€¢ Execute Swap   â”‚ â”€â”€â†’ SwapViewModel.executeSwap()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SwapViewModel (State Management)        â”‚
â”‚                                                      â”‚
â”‚  data class SwapUiState(                            â”‚
â”‚      val tokenIn: Token = BTC,                      â”‚
â”‚      val tokenOut: Token = ETH,                     â”‚
â”‚      val amountIn: String = "",                     â”‚
â”‚      val amountOut: String = "",                    â”‚
â”‚      val exchangeRate: String = "1 BTC = 28.21 ETH",â”‚
â”‚      val networkFee: String = "~$0.01",             â”‚
â”‚      val estimatedTime: String = "~30 seconds",     â”‚
â”‚      val priceImpact: String = "0.1%",              â”‚
â”‚      val isLoading: Boolean = false                 â”‚
â”‚  )                                                   â”‚
â”‚                                                      â”‚
â”‚  â€¢ Real-time quote updates                          â”‚
â”‚  â€¢ Slippage protection (1%)                         â”‚
â”‚  â€¢ Price impact calculation                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               SwapRepository                         â”‚
â”‚                                                      â”‚
â”‚  suspend fun getQuote(                              â”‚
â”‚      tokenIn, tokenOut, amountIn                    â”‚
â”‚  ): Result<Quote>                                    â”‚
â”‚                                                      â”‚
â”‚  suspend fun executeSwap(                           â”‚
â”‚      tokenIn, tokenOut, amountIn, minAmountOut      â”‚
â”‚  ): Result<TxHash>                                   â”‚
â”‚                                                      â”‚
â”‚  suspend fun getPoolInfo(                           â”‚
â”‚      tokenA, tokenB                                 â”‚
â”‚  ): Result<PoolInfo>                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Swap DEX Smart Contract                   â”‚
â”‚                                                      â”‚
â”‚  VIEW FUNCTION (No Gas):                            â”‚
â”‚  â€¢ get_quote(amount_in, token_in, token_out)        â”‚
â”‚    â†’ Returns: amount_out, price_impact              â”‚
â”‚                                                      â”‚
â”‚  ENTRY FUNCTION (Gas Required):                     â”‚
â”‚  â€¢ swap_exact_input<TokenIn, TokenOut>(             â”‚
â”‚      amount_in: u64,                                â”‚
â”‚      min_amount_out: u64  // Slippage protection    â”‚
â”‚    )                                                 â”‚
â”‚                                                      â”‚
â”‚  AMM FORMULA (Constant Product):                    â”‚
â”‚  amount_out = (amount_in * 997 * reserve_out) /     â”‚
â”‚               (reserve_in * 1000 + amount_in * 997) â”‚
â”‚                                                      â”‚
â”‚  â€¢ 0.3% fee (3/1000)                                â”‚
â”‚  â€¢ Slippage check: assert!(out >= min_out)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

UI COMPONENTS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Swap Screen (Compose)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â† Swap                    âš™  â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  You pay                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚ ğŸª™ BTC â–¼  0.055227016  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚           â‰ˆ $6206.85   â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚         â‡…  [Swap Icon]        â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  You receive                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚ âŸ  ETH â–¼     1.558      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚           â‰ˆ $6206.85   â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  Exchange Rate                â”‚  â”‚
â”‚  â”‚  1 BTC = 28.21 ETH      ğŸ“ˆ    â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  Network Fee        ~$0.01    â”‚  â”‚
â”‚  â”‚  Estimated Time   ~30 seconds â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚    Review Swap         â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **3. Tap-to-Pay Feature**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  TAP-TO-PAY FEATURE                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER ACTIONS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Tap "Send"     â”‚ â”€â”€â†’ WalletViewModel.initiateSend()
â”‚ â€¢ Scan QR        â”‚ â”€â”€â†’ QRScanner.scanAddress()
â”‚ â€¢ Enter Amount   â”‚ â”€â”€â†’ WalletViewModel.validateAmount()
â”‚ â€¢ Confirm Send   â”‚ â”€â”€â†’ WalletViewModel.sendCoins()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           TransferViewModel (State Management)       â”‚
â”‚                                                      â”‚
â”‚  data class TransferUiState(                        â”‚
â”‚      val recipient: String = "",                    â”‚
â”‚      val amount: String = "",                       â”‚
â”‚      val isValidAddress: Boolean = false,           â”‚
â”‚      val balance: String = "5.99928 APT",           â”‚
â”‚      val networkFee: String = "~0.001 APT",         â”‚
â”‚      val isLoading: Boolean = false                 â”‚
â”‚  )                                                   â”‚
â”‚                                                      â”‚
â”‚  â€¢ Address validation (0x...)                       â”‚
â”‚  â€¢ Balance check                                    â”‚
â”‚  â€¢ Fee estimation                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               WalletRepository                       â”‚
â”‚                                                      â”‚
â”‚  suspend fun transfer(                              â”‚
â”‚      recipient: String,                             â”‚
â”‚      amount: u64                                    â”‚
â”‚  ): Result<TxHash>                                   â”‚
â”‚                                                      â”‚
â”‚  suspend fun estimateFee(                           â”‚
â”‚      recipient: String,                             â”‚
â”‚      amount: u64                                    â”‚
â”‚  ): Result<u64>                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Aptos Coin Transfer                      â”‚
â”‚                                                      â”‚
â”‚  â€¢ 0x1::coin::transfer<APT>(                        â”‚
â”‚      to: address,                                   â”‚
â”‚      amount: u64                                    â”‚
â”‚    )                                                 â”‚
â”‚                                                      â”‚
â”‚  â€¢ Instant finality (<1 second)                     â”‚
â”‚  â€¢ Low fees (~0.001 APT)                            â”‚
â”‚  â€¢ Event: TransferEvent emitted                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FLOW DIAGRAM:
Sender                    Blockchain                Recipient
  â”‚                           â”‚                         â”‚
  â”‚ 1. Tap "Send"             â”‚                         â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                         â”‚
  â”‚                           â”‚                         â”‚
  â”‚ 2. Scan QR / Enter Addressâ”‚                         â”‚
  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚
  â”‚                           â”‚                         â”‚
  â”‚ 3. Enter Amount (1 APT)   â”‚                         â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                         â”‚
  â”‚                           â”‚                         â”‚
  â”‚ 4. Confirm Transaction    â”‚                         â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                         â”‚
  â”‚                           â”‚                         â”‚
  â”‚                           â”‚ 5. Execute Transfer     â”‚
  â”‚                           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
  â”‚                           â”‚                         â”‚
  â”‚                           â”‚ 6. Update Balances      â”‚
  â”‚                           â”‚   â€¢ Sender: -1.001 APT  â”‚
  â”‚                           â”‚   â€¢ Recipient: +1 APT   â”‚
  â”‚                           â”‚                         â”‚
  â”‚ 7. Success âœ…             â”‚ 8. Notification ğŸ“¬      â”‚
  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
  â”‚                           â”‚                         â”‚
```

### **4. Bucket Protocol Feature**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 BUCKET PROTOCOL FEATURE                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER ACTIONS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Init Protocol  â”‚ â”€â”€â†’ BucketViewModel.initialize()
â”‚ â€¢ Deposit        â”‚ â”€â”€â†’ BucketViewModel.deposit()
â”‚ â€¢ Open Long      â”‚ â”€â”€â†’ BucketViewModel.openLong()
â”‚ â€¢ Open Short     â”‚ â”€â”€â†’ BucketViewModel.openShort()
â”‚ â€¢ Close Position â”‚ â”€â”€â†’ BucketViewModel.closePosition()
â”‚ â€¢ Update Oracle  â”‚ â”€â”€â†’ BucketViewModel.updatePrices()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          BucketViewModel (State Management)          â”‚
â”‚                                                      â”‚
â”‚  data class BucketUiState(                          â”‚
â”‚      val leverage: Int = 10,                        â”‚
â”‚      val collateral: String = "0.00 APT",           â”‚
â”‚      val positions: List<Position> = emptyList(),   â”‚
â”‚      val totalPNL: String = "+0.00%",               â”‚
â”‚      val activeBuckets: List<Bucket> = emptyList(), â”‚
â”‚      val oraclePrices: Prices? = null               â”‚
â”‚  )                                                   â”‚
â”‚                                                      â”‚
â”‚  data class Position(                               â”‚
â”‚      val id: Long,                                  â”‚
â”‚      val type: String, // "LONG" or "SHORT"         â”‚
â”‚      val margin: String = "0.05 APT",               â”‚
â”‚      val pnl: String = "+10.5%",                    â”‚
â”‚      val isActive: Boolean = true                   â”‚
â”‚  )                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              BucketRepository                        â”‚
â”‚                                                      â”‚
â”‚  suspend fun initialize(leverage: Long): TxHash      â”‚
â”‚  suspend fun openLong(bucketId: Long): TxHash        â”‚
â”‚  suspend fun closePosition(posId: Long): TxHash      â”‚
â”‚  suspend fun getPositions(): List<Position>          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Bucket Protocol Smart Contract             â”‚
â”‚          Address: 0x33ec41711fe3c92c3f1a...          â”‚
â”‚                                                      â”‚
â”‚  ENTRY FUNCTIONS:                                    â”‚
â”‚  â€¢ init(leverage: u64)                              â”‚
â”‚  â€¢ deposit_collateral(amount: u64)                  â”‚
â”‚  â€¢ open_long(bucket_id: u64)                        â”‚
â”‚  â€¢ open_short(bucket_id: u64)                       â”‚
â”‚  â€¢ close_position(position_id: u64)                 â”‚
â”‚  â€¢ update_oracle(btc, eth, sol: u64)                â”‚
â”‚                                                      â”‚
â”‚  VIEW FUNCTIONS:                                     â”‚
â”‚  â€¢ get_collateral_balance() â†’ u64                   â”‚
â”‚  â€¢ get_position_details(id) â†’ Position              â”‚
â”‚  â€¢ get_oracle_prices() â†’ (u64, u64, u64)           â”‚
â”‚                                                      â”‚
â”‚  BASKET ALLOCATION:                                  â”‚
â”‚  â€¢ BTC: 50%                                         â”‚
â”‚  â€¢ ETH: 30%                                         â”‚
â”‚  â€¢ SOL: 20%                                         â”‚
â”‚                                                      â”‚
â”‚  PARAMETERS:                                         â”‚
â”‚  â€¢ Min Margin: 0.05 APT (~$0.50)                    â”‚
â”‚  â€¢ Leverage: 1-20x                                  â”‚
â”‚  â€¢ PNL Calculation: Real-time                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TRADING FLOW:
â”Œâ”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚ Init â”‚â”€â”€â”€â”€â”€â–¶â”‚Depositâ”€â”€â”€â”€â”€â–¶â”‚ Open â”‚â”€â”€â”€â”€â”€â–¶â”‚Close â”‚
â”‚ 10x  â”‚      â”‚ 0.5APTâ”‚      â”‚ Long â”‚      â”‚  Pos â”‚
â””â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”˜
   â”‚              â”‚             â”‚             â”‚
   â”‚              â”‚             â”‚             â”‚
   â–¼              â–¼             â–¼             â–¼
Protocol      Collateral    Position      Calculate
Created       Added         Opened        PNL & Pay
```

### **5. CalendeFi Feature**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  CALENDEFI FEATURE                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER ACTIONS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Create Scheduleâ”‚ â”€â”€â†’ CalendarViewModel.createSchedule()
â”‚ â€¢ View Schedules â”‚ â”€â”€â†’ CalendarViewModel.getSchedules()
â”‚ â€¢ Execute Paymentâ”‚ â”€â”€â†’ CalendarViewModel.executePayment()
â”‚ â€¢ Cancel Scheduleâ”‚ â”€â”€â†’ CalendarViewModel.cancelSchedule()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CalendarViewModel (State Management)         â”‚
â”‚                                                      â”‚
â”‚  data class CalendarUiState(                        â”‚
â”‚      val schedules: List<Schedule> = emptyList(),   â”‚
â”‚      val activeCount: Int = 0,                      â”‚
â”‚      val totalEscrowed: String = "0.00 APT"         â”‚
â”‚  )                                                   â”‚
â”‚                                                      â”‚
â”‚  data class Schedule(                               â”‚
â”‚      val id: Long,                                  â”‚
â”‚      val recipient: String,                         â”‚
â”‚      val amount: String = "1.0 APT",                â”‚
â”‚      val executeAt: String = "2025-12-01",          â”‚
â”‚      val interval: String = "Monthly", // or null   â”‚
â”‚      val occurrences: Int = 1,                      â”‚
â”‚      val executed: Int = 0,                         â”‚
â”‚      val isActive: Boolean = true                   â”‚
â”‚  )                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            CalendarRepository                        â”‚
â”‚                                                      â”‚
â”‚  suspend fun createSchedule(                        â”‚
â”‚      recipient, amount, executeAt,                  â”‚
â”‚      interval, occurrences                          â”‚
â”‚  ): Result<TxHash>                                   â”‚
â”‚                                                      â”‚
â”‚  suspend fun executePayment(                        â”‚
â”‚      payerAddr, scheduleId                          â”‚
â”‚  ): Result<TxHash>                                   â”‚
â”‚                                                      â”‚
â”‚  suspend fun cancelSchedule(                        â”‚
â”‚      scheduleId                                     â”‚
â”‚  ): Result<TxHash>                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Calendar Payments Smart Contract             â”‚
â”‚        Address: 0x0f9713e3c42951dbc4f05cc2e7...     â”‚
â”‚                                                      â”‚
â”‚  UNIFIED API:                                        â”‚
â”‚  â€¢ create_schedule(                                 â”‚
â”‚      recipient, amount, execute_at,                 â”‚
â”‚      interval_secs, occurrences                     â”‚
â”‚    )                                                 â”‚
â”‚    â†’ interval=0, occurrences=1: ONE-TIME            â”‚
â”‚    â†’ interval>0, occurrences>1: RECURRING           â”‚
â”‚                                                      â”‚
â”‚  â€¢ execute(payer_addr, schedule_id)                 â”‚
â”‚    â†’ Anyone can call (permissionless)               â”‚
â”‚    â†’ Checks timestamp >= execute_at                 â”‚
â”‚    â†’ Transfers from escrow to recipient             â”‚
â”‚                                                      â”‚
â”‚  â€¢ cancel(schedule_id)                              â”‚
â”‚    â†’ Only payer can cancel                          â”‚
â”‚    â†’ Refunds remaining escrowed funds               â”‚
â”‚                                                      â”‚
â”‚  â€¢ get_schedule(payer_addr, schedule_id)            â”‚
â”‚    â†’ View function (no gas)                         â”‚
â”‚                                                      â”‚
â”‚  ESCROW SAFETY:                                      â”‚
â”‚  â€¢ Funds locked at creation                         â”‚
â”‚  â€¢ Released only on execution                       â”‚
â”‚  â€¢ Refunded on cancellation                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PAYMENT FLOW:
Create          Escrow          Wait           Execute
  â”‚               â”‚              â”‚               â”‚
  â”‚ Lock funds    â”‚              â”‚               â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚               â”‚
  â”‚               â”‚              â”‚               â”‚
  â”‚               â”‚ Time passes  â”‚               â”‚
  â”‚               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚               â”‚
  â”‚               â”‚              â”‚               â”‚
  â”‚               â”‚              â”‚ Anyone calls  â”‚
  â”‚               â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
  â”‚               â”‚              â”‚               â”‚
  â”‚               â”‚              â”‚  Transfer     â”‚
  â”‚               â”‚              â”‚  to recipient â”‚
  â”‚               â”‚              â”‚               â”‚
  â–¼               â–¼              â–¼               â–¼
Schedule      Escrowed       Pending         Completed
Created       (Safe)         Execution       (Success)
```

---

## ğŸ” **Security Architecture**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SECURITY LAYERS                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LAYER 1: USER AUTHENTICATION                           â”‚
â”‚                                                          â”‚
â”‚  â€¢ Biometric (Fingerprint/Face)                         â”‚
â”‚  â€¢ PIN Backup                                           â”‚
â”‚  â€¢ Session Timeout (5 minutes)                          â”‚
â”‚  â€¢ Failed Attempt Lockout                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LAYER 2: KEY MANAGEMENT                                â”‚
â”‚                                                          â”‚
â”‚  â€¢ Private Key Storage:                                 â”‚
â”‚    - Android Keystore (Hardware-backed)                 â”‚
â”‚    - EncryptedSharedPreferences                         â”‚
â”‚    - Never transmitted over network                     â”‚
â”‚                                                          â”‚
â”‚  â€¢ Transaction Signing:                                 â”‚
â”‚    - Local signing only (Ed25519)                       â”‚
â”‚    - Never expose private key to app layer              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LAYER 3: NETWORK SECURITY                              â”‚
â”‚                                                          â”‚
â”‚  â€¢ HTTPS/TLS 1.3 only                                   â”‚
â”‚  â€¢ Certificate Pinning                                  â”‚
â”‚  â€¢ No plaintext transmission                            â”‚
â”‚  â€¢ Request signing                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LAYER 4: SMART CONTRACT SECURITY                       â”‚
â”‚                                                          â”‚
â”‚  â€¢ Access Control:                                      â”‚
â”‚    assert!(signer == owner, EPERMISSION_DENIED)         â”‚
â”‚                                                          â”‚
â”‚  â€¢ Input Validation:                                    â”‚
â”‚    assert!(amount > 0, EINVALID_AMOUNT)                 â”‚
â”‚    assert!(leverage >= 1 && leverage <= 20)             â”‚
â”‚                                                          â”‚
â”‚  â€¢ Overflow Protection:                                 â”‚
â”‚    let total = amount * count; // Aborts on overflow    â”‚
â”‚                                                          â”‚
â”‚  â€¢ Reentrancy: Prevented by Move language design        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LAYER 5: BLOCKCHAIN SECURITY                           â”‚
â”‚                                                          â”‚
â”‚  â€¢ Aptos BFT Consensus                                  â”‚
â”‚  â€¢ 67% validator agreement required                     â”‚
â”‚  â€¢ Instant finality (<1 second)                         â”‚
â”‚  â€¢ Ed25519 signature verification                       â”‚
â”‚  â€¢ SHA3-256 cryptographic hashing                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š **Data Flow Summary**

```
USER INTERACTION
      â†“
UI LAYER (Compose)
      â†“
VIEWMODEL (State Management)
      â†“
REPOSITORY (Data Abstraction)
      â†“
SDK LAYER (Kaptos)
      â†“
NETWORK (HTTPS/JSON-RPC)
      â†“
BLOCKCHAIN (Aptos Validators)
      â†“
SMART CONTRACTS (Move)
      â†“
STATE STORAGE (On-chain)
      â†“
EVENTS EMITTED
      â†“
UI UPDATE (StateFlow)
```

---

## ğŸš€ **Technology Summary**

| Layer | Technology | Purpose |
|-------|-----------|---------|
| **Frontend** | Kotlin + Jetpack Compose | Modern Android UI |
| **Architecture** | MVVM + Repository | Clean separation of concerns |
| **State** | StateFlow + Coroutines | Reactive state management |
| **SDK** | Kaptos (xyz.mcxross) | Aptos blockchain integration |
| **Blockchain** | Aptos (Move) | Smart contracts & state |
| **Consensus** | AptosBFT | Byzantine fault tolerance |
| **Crypto** | Ed25519 | Transaction signing |
| **Security** | Android Keystore + Biometric | Key storage & authentication |
| **Network** | HTTPS/TLS 1.3 | Secure communication |

---

**Last Updated:** November 3, 2025  
**Version:** 2.0 (Complete System Architecture)  
**Maintained By:** Cresca Team
